{"is_source_file": true, "format": "TypeScript (Angular component)", "description": "This file defines an Angular component 'GameCanvasComponent' responsible for rendering and managing the game canvas, including animation loop, game state transitions, input handling, and error management.", "external_files": ["../../services/game.service", "../../services/audio.service", "./game-canvas.component.html", "./game-canvas.component.css"], "external_methods": ["GameService.attachCanvas", "GameService.updateCanvasSize", "GameService.update", "GameService.render", "GameService.init", "GameService.onKeyDown", "GameService.onKeyUp", "GameService.onTouchStart", "GameService.onTouchMove", "GameService.onTouchEnd", "GameAudioService.stopMusic", "GameAudioService.playMusic", "GameAudioService.playLevelComplete"], "published": ["gameOver", "levelComplete"], "classes": [{"name": "GameCanvasComponent", "description": "An Angular component responsible for rendering the game on an HTML canvas, managing animation loop, user input, and game state transitions."}], "methods": [{"name": "ngAfterViewInit", "description": "Lifecycle hook that initializes the canvas, attaches it to the game service, resizes the canvas, and starts the game loop."}, {"name": "ngOnDestroy", "description": "Lifecycle hook that marks the component as destroyed and cancels ongoing animation frames."}, {"name": "cancelAnimLoop", "description": "Cancels the ongoing animation frame request if present."}, {"name": "startLoop", "description": "Provides a clean start for the animation loop by canceling prior frames and requesting a new one."}, {"name": "resizeCanvas", "description": "Resizes the game canvas, updating the size immediately and after a delay."}, {"name": "loop", "description": "Main animation/game loop; handles game state updates, rendering, input disabling, error handling, and scheduling the next frame."}, {"name": "startGame", "description": "Begins a new game session, resetting error overlays, frame counter, and starting the animation loop."}, {"name": "restartGame", "description": "Restarts the game, resetting error overlays, frame counter, and invoking startGame."}, {"name": "onKeyDown", "description": "Handles keydown events for game input, delegating to the game service if input is enabled."}, {"name": "onKeyUp", "description": "Handles keyup events, delegating to the game service if input is enabled."}, {"name": "onTouchStart", "description": "Handles touchstart events for mobile controls if input is enabled."}, {"name": "onTouchMove", "description": "Handles touchmove events for mobile controls if input is enabled."}, {"name": "onTouchEnd", "description": "Handles touchend events for mobile controls if input is enabled."}], "calls": ["globalThis.cancelAnimationFrame", "globalThis.requestAnimationFrame", "globalThis.setTimeout", "GameService.update", "GameService.render", "GameService.attachCanvas", "GameService.updateCanvasSize", "GameService.init", "GameService.onKeyDown", "GameService.onKeyUp", "GameService.onTouchStart", "GameService.onTouchMove", "GameService.onTouchEnd", "GameAudioService.stopMusic", "GameAudioService.playMusic", "GameAudioService.playLevelComplete"], "search-terms": ["Angular game component", "animation loop", "canvas rendering", "game over event", "level complete event", "error overlay", "canvas resize", "requestAnimationFrame", "audio service", "game service integration"], "state": 2, "file_id": 24, "knowledge_revision": 111, "git_revision": "3ecb56a272002017c29ce3a5148a7cee05e0faa7", "revision_history": [{"51": ""}, {"75": ""}, {"77": ""}, {"82": ""}, {"85": ""}, {"90": ""}, {"93": "b51a96b23d9d83039bc60a6669c5dd74ee4095db"}, {"95": "b51a96b23d9d83039bc60a6669c5dd74ee4095db"}, {"97": "4b1ac76b5b0201c752819ddb92291db8cde9d113"}, {"99": "4b1ac76b5b0201c752819ddb92291db8cde9d113"}, {"104": "d66972d9c1704616fdbcf54f6e4825acd0df0a6d"}, {"105": "d66972d9c1704616fdbcf54f6e4825acd0df0a6d"}, {"106": "7c935a13c6e2405f1dd9e0c4f2ff2c97e4854575"}, {"107": "7c935a13c6e2405f1dd9e0c4f2ff2c97e4854575"}, {"110": "7c935a13c6e2405f1dd9e0c4f2ff2c97e4854575"}, {"111": "3ecb56a272002017c29ce3a5148a7cee05e0faa7"}], "ctags": [{"_type": "tag", "name": "GameCanvasComponent", "path": "/home/kavia/workspace/code-generation/circus-jump-challenge-dd6955cc/game_frontend/src/app/components/game-canvas/game-canvas.component.ts", "pattern": "/^export class GameCanvasComponent implements AfterViewInit {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "frameId", "path": "/home/kavia/workspace/code-generation/circus-jump-challenge-dd6955cc/game_frontend/src/app/components/game-canvas/game-canvas.component.ts", "pattern": "/^    const frameId = this.frameCounter;$/", "language": "TypeScript", "kind": "constant"}], "hash": "5f5a4eb16e30f5b49257bd5ef0bc0c0f", "format-version": 4, "code-base-name": "game_frontend", "filename": "game_frontend/src/app/components/game-canvas/game-canvas.component.ts"}