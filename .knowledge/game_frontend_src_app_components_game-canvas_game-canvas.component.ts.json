{"is_source_file": true, "format": "TypeScript", "description": "This is an Angular component TypeScript file that defines the 'GameCanvasComponent', which manages rendering a game on a HTML5 canvas, handling game state transitions (game over and level complete), user input, and animation loop management.", "external_files": ["../../services/game.service", "../../services/audio.service", "./game-canvas.component.html", "./game-canvas.component.css"], "external_methods": ["globalThis.requestAnimationFrame", "globalThis.cancelAnimationFrame", "globalThis.setTimeout"], "published": ["gameOver", "levelComplete", "startGame", "restartGame"], "classes": [{"name": "GameCanvasComponent", "description": "Angular component responsible for rendering game graphics on a canvas, handling game lifecycle, user input, and error states."}], "methods": [{"name": "ngAfterViewInit", "description": "Lifecycle method invoked after component view initialization. Attaches canvas, sets size, and starts the rendering loop."}, {"name": "ngOnDestroy", "description": "Lifecycle method invoked when component is destroyed. Sets a flag and cancels ongoing animation frame."}, {"name": "cancelAnimLoop", "description": "Cancels the current animation frame request if active."}, {"name": "startLoop", "description": "Starts the animation loop after canceling any existing one."}, {"name": "resizeCanvas", "description": "Adjusts the canvas size via the game service, and schedules an additional size update after 100ms."}, {"name": "loop", "description": "Main game loop handling rendering, checking game state, handling errors, and scheduling next frames."}, {"name": "startGame", "description": "Initializes game state, resets overlays, and starts the game animation loop."}, {"name": "restartGame", "description": "Restarts the game by invoking startGame."}, {"name": "onKeyDown", "description": "Handles keyboard input, forwarding key presses to the game service."}, {"name": "onKeyUp", "description": "Handles key release events, forwarding to game service."}, {"name": "onTouchStart", "description": "Handles touch start events."}, {"name": "onTouchMove", "description": "Handles touch move events."}, {"name": "onTouchEnd", "description": "Handles touch end events."}], "calls": ["globalThis.requestAnimationFrame", "globalThis.cancelAnimationFrame", "this.gameSvc.attachCanvas", "this.gameSvc.updateCanvasSize", "this.gameSvc.update", "this.gameSvc.render", "this.gameSvc.onKeyDown", "this.gameSvc.onKeyUp", "this.gameSvc.onTouchStart", "this.gameSvc.onTouchMove", "this.gameSvc.onTouchEnd", "this.audioSvc.stopMusic", "this.audioSvc.playMusic", "this.audioSvc.playLevelComplete"], "search-terms": ["Angular game component", "HTML5 Canvas game", "animation loop management", "game over event", "level complete event", "requestAnimationFrame", "error overlay", "resize handling", "keyboard input handling", "touch input handling", "game service integration"], "state": 2, "file_id": 24, "knowledge_revision": 110, "git_revision": "7c935a13c6e2405f1dd9e0c4f2ff2c97e4854575", "revision_history": [{"51": ""}, {"75": ""}, {"77": ""}, {"82": ""}, {"85": ""}, {"90": ""}, {"93": "b51a96b23d9d83039bc60a6669c5dd74ee4095db"}, {"95": "b51a96b23d9d83039bc60a6669c5dd74ee4095db"}, {"97": "4b1ac76b5b0201c752819ddb92291db8cde9d113"}, {"99": "4b1ac76b5b0201c752819ddb92291db8cde9d113"}, {"104": "d66972d9c1704616fdbcf54f6e4825acd0df0a6d"}, {"105": "d66972d9c1704616fdbcf54f6e4825acd0df0a6d"}, {"106": "7c935a13c6e2405f1dd9e0c4f2ff2c97e4854575"}, {"107": "7c935a13c6e2405f1dd9e0c4f2ff2c97e4854575"}, {"110": "7c935a13c6e2405f1dd9e0c4f2ff2c97e4854575"}], "ctags": [{"_type": "tag", "name": "GameCanvasComponent", "path": "/home/kavia/workspace/code-generation/circus-jump-challenge-dd6955cc/game_frontend/src/app/components/game-canvas/game-canvas.component.ts", "pattern": "/^export class GameCanvasComponent implements AfterViewInit {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "frameId", "path": "/home/kavia/workspace/code-generation/circus-jump-challenge-dd6955cc/game_frontend/src/app/components/game-canvas/game-canvas.component.ts", "pattern": "/^    const frameId = this.frameCounter;$/", "language": "TypeScript", "kind": "constant"}], "hash": "d333a69a1d27ccf212e45784b77e54e8", "format-version": 4, "code-base-name": "game_frontend", "filename": "game_frontend/src/app/components/game-canvas/game-canvas.component.ts"}